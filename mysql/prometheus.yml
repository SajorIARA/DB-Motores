# ====================================================================================
# PROMETHEUS CONFIGURATION - MySQL Monitoring
# ====================================================================================

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    monitor: 'mysql-monitor'
    environment: 'development'

# Scrape configurations
scrape_configs:
  # ==================================================================================
  # Prometheus Self-Monitoring
  # ==================================================================================
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
        labels:
          instance: 'prometheus-server'

  # ==================================================================================
  # MySQL Exporter
  # ==================================================================================
  - job_name: 'mysql'
    scrape_interval: 10s
    scrape_timeout: 5s
    static_configs:
      - targets: ['mysqld-exporter:9104']
        labels:
          instance: 'mysql-primary'
          service: 'mysql'
    
    # Relabel para mejor organización de métricas
    metric_relabel_configs:
      - source_labels: [__name__]
        regex: 'mysql_up'
        target_label: 'critical'
        replacement: 'true'
