{
    "annotations":  {
                        "list":  [

                                 ]
                    },
    "editable":  true,
    "gnetId":  null,
    "graphTooltip":  1,
    "id":  null,
    "links":  [

              ],
    "panels":  [
                   {
                       "datasource":  {
                                          "type":  "prometheus",
                                          "uid":  "prometheus"
                                      },
                       "fieldConfig":  {
                                           "defaults":  {
                                                            "color":  {
                                                                          "mode":  "thresholds"
                                                                      },
                                                            "mappings":  [
                                                                             {
                                                                                 "options":  {
                                                                                                 "0":  {
                                                                                                           "text":  "DOWN"
                                                                                                       }
                                                                                             },
                                                                                 "type":  "value"
                                                                             },
                                                                             {
                                                                                 "options":  {
                                                                                                 "1":  {
                                                                                                           "text":  "UP"
                                                                                                       }
                                                                                             },
                                                                                 "type":  "value"
                                                                             }
                                                                         ],
                                                            "thresholds":  {
                                                                               "mode":  "absolute",
                                                                               "steps":  [
                                                                                             {
                                                                                                 "color":  "red",
                                                                                                 "value":  null
                                                                                             },
                                                                                             {
                                                                                                 "color":  "green",
                                                                                                 "value":  1
                                                                                             }
                                                                                         ]
                                                                           }
                                                        }
                                       },
                       "gridPos":  {
                                       "h":  4,
                                       "w":  6,
                                       "x":  0,
                                       "y":  0
                                   },
                       "id":  1,
                       "options":  {
                                       "colorMode":  "background",
                                       "graphMode":  "none",
                                       "justifyMode":  "center",
                                       "orientation":  "auto",
                                       "reduceOptions":  {
                                                             "calcs":  [
                                                                           "lastNotNull"
                                                                       ],
                                                             "fields":  "",
                                                             "values":  false
                                                         },
                                       "textMode":  "value_and_name"
                                   },
                       "targets":  [
                                       {
                                           "expr":  "pg_up",
                                           "legendFormat":  "PostgreSQL Estado",
                                           "refId":  "A"
                                       }
                                   ],
                       "title":  "PostgreSQL Estado",
                       "type":  "stat"
                   },
                   {
                       "datasource":  {
                                          "type":  "prometheus",
                                          "uid":  "prometheus"
                                      },
                       "fieldConfig":  {
                                           "defaults":  {
                                                            "color":  {
                                                                          "mode":  "palette-classic"
                                                                      },
                                                            "custom":  {
                                                                           "axisLabel":  "",
                                                                           "axisPlacement":  "auto",
                                                                           "barAlignment":  0,
                                                                           "drawStyle":  "line",
                                                                           "fillOpacity":  10,
                                                                           "gradientMode":  "none",
                                                                           "lineWidth":  2,
                                                                           "pointSize":  5,
                                                                           "showPoints":  "never",
                                                                           "spanNulls":  true
                                                                       },
                                                            "mappings":  [

                                                                         ],
                                                            "thresholds":  {
                                                                               "mode":  "absolute",
                                                                               "steps":  [
                                                                                             {
                                                                                                 "color":  "green",
                                                                                                 "value":  null
                                                                                             },
                                                                                             {
                                                                                                 "color":  "yellow",
                                                                                                 "value":  50
                                                                                             },
                                                                                             {
                                                                                                 "color":  "red",
                                                                                                 "value":  80
                                                                                             }
                                                                                         ]
                                                                           },
                                                            "unit":  "short"
                                                        }
                                       },
                       "gridPos":  {
                                       "h":  8,
                                       "w":  9,
                                       "x":  6,
                                       "y":  0
                                   },
                       "id":  2,
                       "options":  {
                                       "legend":  {
                                                      "calcs":  [
                                                                    "lastNotNull",
                                                                    "max"
                                                                ],
                                                      "displayMode":  "table",
                                                      "placement":  "bottom"
                                                  },
                                       "tooltip":  {
                                                       "mode":  "multi"
                                                   }
                                   },
                       "targets":  [
                                       {
                                           "expr":  "pg_stat_activity_count{datname=\"$database\", state=\"active\"}",
                                           "legendFormat":  "Active",
                                           "refId":  "A"
                                       }
                                   ],
                       "title":  "Conexiones Activas",
                       "type":  "timeseries"
                   },
                   {
                       "datasource":  {
                                          "type":  "prometheus",
                                          "uid":  "prometheus"
                                      },
                       "fieldConfig":  {
                                           "defaults":  {
                                                            "color":  {
                                                                          "mode":  "thresholds"
                                                                      },
                                                            "mappings":  [

                                                                         ],
                                                            "max":  1,
                                                            "min":  0,
                                                            "thresholds":  {
                                                                               "mode":  "absolute",
                                                                               "steps":  [
                                                                                             {
                                                                                                 "color":  "red",
                                                                                                 "value":  null
                                                                                             },
                                                                                             {
                                                                                                 "color":  "yellow",
                                                                                                 "value":  0.8
                                                                                             },
                                                                                             {
                                                                                                 "color":  "green",
                                                                                                 "value":  0.95
                                                                                             }
                                                                                         ]
                                                                           },
                                                            "unit":  "percentunit"
                                                        }
                                       },
                       "gridPos":  {
                                       "h":  8,
                                       "w":  9,
                                       "x":  15,
                                       "y":  0
                                   },
                       "id":  3,
                       "options":  {
                                       "orientation":  "auto",
                                       "reduceOptions":  {
                                                             "calcs":  [
                                                                           "lastNotNull"
                                                                       ],
                                                             "fields":  "",
                                                             "values":  false
                                                         },
                                       "showThresholdLabels":  false,
                                       "showThresholdMarkers":  true
                                   },
                       "targets":  [
                                       {
                                           "expr":  "rate(pg_stat_database_blks_hit{datname=\"$database\"}[5m]) / (rate(pg_stat_database_blks_hit{datname=\"$database\"}[5m]) + rate(pg_stat_database_blks_read{datname=\"$database\"}[5m]))",
                                           "legendFormat":  "Cache Hit Ratio",
                                           "refId":  "A"
                                       }
                                   ],
                       "title":  "Cache Hit Ratio",
                       "type":  "gauge"
                   },
                   {
                       "datasource":  {
                                          "type":  "prometheus",
                                          "uid":  "prometheus"
                                      },
                       "fieldConfig":  {
                                           "defaults":  {
                                                            "color":  {
                                                                          "mode":  "thresholds"
                                                                      },
                                                            "decimals":  2,
                                                            "mappings":  [

                                                                         ],
                                                            "thresholds":  {
                                                                               "mode":  "absolute",
                                                                               "steps":  [
                                                                                             {
                                                                                                 "color":  "green",
                                                                                                 "value":  null
                                                                                             },
                                                                                             {
                                                                                                 "color":  "yellow",
                                                                                                 "value":  1073741824
                                                                                             },
                                                                                             {
                                                                                                 "color":  "red",
                                                                                                 "value":  10737418240
                                                                                             }
                                                                                         ]
                                                                           },
                                                            "unit":  "bytes"
                                                        }
                                       },
                       "gridPos":  {
                                       "h":  4,
                                       "w":  6,
                                       "x":  0,
                                       "y":  4
                                   },
                       "id":  4,
                       "options":  {
                                       "colorMode":  "value",
                                       "graphMode":  "area",
                                       "justifyMode":  "center",
                                       "orientation":  "auto",
                                       "reduceOptions":  {
                                                             "calcs":  [
                                                                           "lastNotNull"
                                                                       ],
                                                             "fields":  "",
                                                             "values":  false
                                                         },
                                       "textMode":  "value_and_name"
                                   },
                       "targets":  [
                                       {
                                           "expr":  "pg_database_size_bytes{datname=\"$database\"}",
                                           "legendFormat":  "Tamaño",
                                           "refId":  "A"
                                       }
                                   ],
                       "title":  "Tamaño Base de Datos",
                       "type":  "stat"
                   },
                   {
                       "datasource":  {
                                          "type":  "prometheus",
                                          "uid":  "prometheus"
                                      },
                       "fieldConfig":  {
                                           "defaults":  {
                                                            "color":  {
                                                                          "mode":  "palette-classic"
                                                                      },
                                                            "custom":  {
                                                                           "axisLabel":  "Transacciones/s",
                                                                           "axisPlacement":  "auto",
                                                                           "barAlignment":  0,
                                                                           "drawStyle":  "line",
                                                                           "fillOpacity":  10,
                                                                           "gradientMode":  "none",
                                                                           "lineWidth":  2,
                                                                           "pointSize":  5,
                                                                           "showPoints":  "never",
                                                                           "spanNulls":  true
                                                                       },
                                                            "mappings":  [

                                                                         ],
                                                            "unit":  "ops"
                                                        }
                                       },
                       "gridPos":  {
                                       "h":  8,
                                       "w":  12,
                                       "x":  0,
                                       "y":  8
                                   },
                       "id":  5,
                       "options":  {
                                       "legend":  {
                                                      "calcs":  [
                                                                    "lastNotNull",
                                                                    "max"
                                                                ],
                                                      "displayMode":  "table",
                                                      "placement":  "bottom"
                                                  },
                                       "tooltip":  {
                                                       "mode":  "multi"
                                                   }
                                   },
                       "targets":  [
                                       {
                                           "expr":  "rate(pg_stat_database_xact_commit{datname=\"$database\"}[5m])",
                                           "legendFormat":  "Commits",
                                           "refId":  "A"
                                       },
                                       {
                                           "expr":  "rate(pg_stat_database_xact_rollback{datname=\"$database\"}[5m])",
                                           "legendFormat":  "Rollbacks",
                                           "refId":  "B"
                                       }
                                   ],
                       "title":  "Transacciones/s",
                       "type":  "timeseries"
                   },
                   {
                       "datasource":  {
                                          "type":  "prometheus",
                                          "uid":  "prometheus"
                                      },
                       "fieldConfig":  {
                                           "defaults":  {
                                                            "color":  {
                                                                          "mode":  "palette-classic"
                                                                      },
                                                            "custom":  {
                                                                           "axisLabel":  "Conexiones",
                                                                           "axisPlacement":  "auto",
                                                                           "barAlignment":  0,
                                                                           "drawStyle":  "line",
                                                                           "fillOpacity":  20,
                                                                           "gradientMode":  "none",
                                                                           "lineWidth":  2,
                                                                           "pointSize":  5,
                                                                           "showPoints":  "never",
                                                                           "spanNulls":  true
                                                                       },
                                                            "mappings":  [

                                                                         ],
                                                            "unit":  "short"
                                                        }
                                       },
                       "gridPos":  {
                                       "h":  8,
                                       "w":  12,
                                       "x":  12,
                                       "y":  8
                                   },
                       "id":  6,
                       "options":  {
                                       "legend":  {
                                                      "calcs":  [
                                                                    "lastNotNull"
                                                                ],
                                                      "displayMode":  "table",
                                                      "placement":  "bottom"
                                                  },
                                       "tooltip":  {
                                                       "mode":  "multi"
                                                   }
                                   },
                       "targets":  [
                                       {
                                           "expr":  "pg_stat_activity_count{datname=\"$database\", state=\"active\"}",
                                           "legendFormat":  "Active",
                                           "refId":  "A"
                                       },
                                       {
                                           "expr":  "pg_stat_activity_count{datname=\"$database\", state=\"idle\"}",
                                           "legendFormat":  "Idle",
                                           "refId":  "B"
                                       },
                                       {
                                           "expr":  "pg_stat_activity_count{datname=\"$database\", state=\"idle in transaction\"}",
                                           "legendFormat":  "Idle in Transaction",
                                           "refId":  "C"
                                       }
                                   ],
                       "title":  "Conexiones por Estado",
                       "type":  "timeseries"
                   },
                   {
                       "datasource":  {
                                          "type":  "prometheus",
                                          "uid":  "prometheus"
                                      },
                       "fieldConfig":  {
                                           "defaults":  {
                                                            "color":  {
                                                                          "mode":  "palette-classic"
                                                                      },
                                                            "custom":  {
                                                                           "axisLabel":  "Operaciones/s",
                                                                           "axisPlacement":  "auto",
                                                                           "barAlignment":  0,
                                                                           "drawStyle":  "line",
                                                                           "fillOpacity":  10,
                                                                           "gradientMode":  "none",
                                                                           "lineWidth":  2,
                                                                           "pointSize":  5,
                                                                           "showPoints":  "never",
                                                                           "spanNulls":  true
                                                                       },
                                                            "mappings":  [

                                                                         ],
                                                            "unit":  "ops"
                                                        }
                                       },
                       "gridPos":  {
                                       "h":  8,
                                       "w":  12,
                                       "x":  0,
                                       "y":  16
                                   },
                       "id":  7,
                       "options":  {
                                       "legend":  {
                                                      "calcs":  [
                                                                    "lastNotNull"
                                                                ],
                                                      "displayMode":  "table",
                                                      "placement":  "bottom"
                                                  },
                                       "tooltip":  {
                                                       "mode":  "multi"
                                                   }
                                   },
                       "targets":  [
                                       {
                                           "expr":  "rate(pg_stat_database_tup_inserted{datname=\"$database\"}[5m])",
                                           "legendFormat":  "Inserts",
                                           "refId":  "A"
                                       },
                                       {
                                           "expr":  "rate(pg_stat_database_tup_updated{datname=\"$database\"}[5m])",
                                           "legendFormat":  "Updates",
                                           "refId":  "B"
                                       },
                                       {
                                           "expr":  "rate(pg_stat_database_tup_deleted{datname=\"$database\"}[5m])",
                                           "legendFormat":  "Deletes",
                                           "refId":  "C"
                                       }
                                   ],
                       "title":  "Operaciones DML",
                       "type":  "timeseries"
                   },
                   {
                       "datasource":  {
                                          "type":  "prometheus",
                                          "uid":  "prometheus"
                                      },
                       "fieldConfig":  {
                                           "defaults":  {
                                                            "color":  {
                                                                          "mode":  "thresholds"
                                                                      },
                                                            "mappings":  [

                                                                         ],
                                                            "thresholds":  {
                                                                               "mode":  "absolute",
                                                                               "steps":  [
                                                                                             {
                                                                                                 "color":  "green",
                                                                                                 "value":  null
                                                                                             },
                                                                                             {
                                                                                                 "color":  "yellow",
                                                                                                 "value":  1000
                                                                                             },
                                                                                             {
                                                                                                 "color":  "red",
                                                                                                 "value":  10000
                                                                                             }
                                                                                         ]
                                                                           },
                                                            "unit":  "short"
                                                        }
                                       },
                       "gridPos":  {
                                       "h":  8,
                                       "w":  12,
                                       "x":  12,
                                       "y":  16
                                   },
                       "id":  8,
                       "options":  {
                                       "orientation":  "auto",
                                       "reduceOptions":  {
                                                             "calcs":  [
                                                                           "lastNotNull"
                                                                       ],
                                                             "fields":  "",
                                                             "values":  false
                                                         },
                                       "showThresholdLabels":  false,
                                       "showThresholdMarkers":  true
                                   },
                       "targets":  [
                                       {
                                           "expr":  "pg_stat_database_tup_dead{datname=\"$database\"}",
                                           "legendFormat":  "Dead Tuples",
                                           "refId":  "A"
                                       }
                                   ],
                       "title":  "Tuplas Muertas (Necesita VACUUM)",
                       "type":  "gauge"
                   }
               ],
    "refresh":  "10s",
    "schemaVersion":  27,
    "style":  "dark",
    "tags":  [
                 "postgresql",
                 "database"
             ],
    "templating":  {
                       "list":  [
                                    {
                                        "allValue":  null,
                                        "current":  {
                                                            "selected":  false,
                                                            "text":  "dev_database",
                                                            "value":  "dev_database"
                                                    },
                                        "datasource":  {
                                                            "type":  "prometheus",
                                                            "uid":  "prometheus"
                                                        },
                                        "definition":  "label_values(pg_stat_database_numbackends, datname)",
                                        "hide":  0,
                                        "includeAll":  false,
                                        "label":  "Database",
                                        "multi":  false,
                                        "name":  "database",
                                        "options":  [
                                                            {
                                                                "selected":  true,
                                                                "text":  "dev_database",
                                                                "value":  "dev_database"
                                                            }
                                                    ],
                                        "query":  "label_values(pg_stat_database_numbackends, datname)",
                                        "refresh":  1,
                                        "regex":  "/^(?!template0|template1|postgres$).*/",
                                        "skipUrlSync":  false,
                                        "sort":  1,
                                        "type":  "query"
                                    }
                                ]
                   },
    "time":  {
                 "from":  "now-1h",
                 "to":  "now"
             },
    "timepicker":  {

                   },
    "timezone":  "browser",
    "title":  "PostgreSQL - Vista General",
    "uid":  "postgresql-overview",
    "version":  1
}
